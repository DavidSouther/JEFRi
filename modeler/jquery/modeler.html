<!doctype html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!--Select a theme by uncommenting the line below:-->

	<!-- UI Lightness Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css"/>-->

	<!-- UI Darkness Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-darkness/jquery-ui.css"/>-->

	<!-- Smoothness Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/smoothness/jquery-ui.css"/>-->

	<!-- Start Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/start/jquery-ui.css"/>-->

	<!-- Redmond Theme -->
<!--	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/redmond/jquery-ui.css"/> -->

	<!-- Sunny Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/sunny/jquery-ui.css"/>-->

	<!-- Overcast Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/overcast/jquery-ui.css"/>-->

	<!-- Le Frog Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/le-frog/jquery-ui.css"/>-->

	<!-- Flick Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/flick/jquery-ui.css"/>-->

	<!-- Pepper Grinder Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/pepper-grinder/jquery-ui.css"/>-->

	<!-- Eggplant Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/eggplant/jquery-ui.css"/>-->

	<!-- Dark Hive Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/dark-hive/jquery-ui.css"/>-->

	<!-- Cupertino Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/cupertino/jquery-ui.css"/>-->

	<!-- South Street Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/south-street/jquery-ui.css"/>-->

	<!-- Blitzer Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/blitzer/jquery-ui.css"/>-->

	<!-- Humanity Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/humanity/jquery-ui.css"/>-->

	<!-- Hot Sneaks Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/hot-sneaks/jquery-ui.css"/>-->

	<!-- Excite Bike Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/excite-bike/jquery-ui.css"/>-->

	<!-- Vader Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/vader/jquery-ui.css"/>-->

	<!-- Dot Luv Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/dot-luv-grinder/jquery-ui.css"/>-->

	<!-- Mint Choc Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/mint-choc/jquery-ui.css"/>-->

	<!-- Black Tie Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/black-tie/jquery-ui.css"/>-->

	<!-- Trontastic Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/trontastic/jquery-ui.css"/>-->

	<!-- Swanky Purse Theme -->
<!--		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/swanky-purse/jquery-ui.css"/>-->

		<link rel="stylesheet" href="http://davidsouther.com/projects/glight/css/glight/glight.css"/>

	<!-- Include jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>

	<!-- Include jQuery UI -->
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"></script>
	<script src='../EntityContext.js'></script>
	<script src='../writer.js'></script>

	<script src="http://jsplumb.org/js/jquery.jsPlumb-1.3.8-all-min.js"></script>

	<script src="modeler.js"></script>
	<link rel="stylesheet" href="modeler.css" />
</head>
<body>
	<div id='relationships'></div>
	<div id='entities'></div>
	<div id="controls">
		<button id="new_entity" value="New Entity">New Entity</button>
		<br />
		<button id="new_relationship">+</button>
		<select id="new_relationship_type">
			<option>Is_a</option>
			<option>Has_a -&gt; Has_a</option>
			<option>Has_a -&gt; Has_many</option>
			<option>Has_many -&gt; Has_a</option>
		</select>
		<br />
		<hr />
		<button id="load_context">Load Context</button>
		<button id="save_context">Save Context</button>
		<br />
	</div>

	<div id="templates" />
		<!-- Temlpate for a new entity field. -->
		<div class="entity ui-widget ui-corner-all">
			<h3 class="ui-widget-header ui-corner-top">
				<span class="name">Name</span>
			</h3>
			<ul class="ui-widget-content field-list">
				<li class="ui-widget-content"><a href='#'>+ Field</a></li>
			</ul>
			<ul class="ui-widget-content relationship-list">
				<li class="ui-widget-content"><a href='#'>+ Relationship</a></li>
			</ul>
		</div>

		<!-- Template for editing an entity field. -->
		<div class="edit_relationship ui-widget-content">
			<input class="name" /><br />
			<select class="type">
				<option value="is_a">Is_a</option>
				<option value="has_a" default>Has_a</option>
				<option value="has_many">Has_many</option>
			</select><br />
			From: <select class="from"><option></option></select><br />
			To: <select class="to_entity"><option></option></select> :
			<select class="to_field"><option></option></select><br />
			<button class="done">Done</button>
			<br style="clear:both;" />
		</div>

		<div class="edit_field ui-widget-content">
			<input class="name" /><br />
			<select class="type">
				<option value="key">Key</option>
				<option value="string">String</option>
				<option value="int">Integer</option>
				<option value="float">Float</option>
				<option>&nbsp;</option>
				<option>Real</option>
				<option>Complex</option>
				<option>Ordinal</option>
				<option>Cardinal</option>
				<option>Prime</option>
				<option>Singular</option>
				<option>Blob</option>
			</select>
			<textarea class="attributes" rows="3" cols="10"></textarea>
			<button class="done">Done</button>
			<br style="clear:both;" />
		</div>

		<ul>
			<li class="new_field">
				<a href='#' class='name'>Field</a>: <span class="type">New</span>
			</li>
			<li class="new_relationship">
				<a href='#' class='name'>Relationship</a>:
				<span class="type">New</span>
				<span class="from"></span> -&gt;
				<span class="to"><span class="entity"></span>:<span class="field"></span></span>
			</li>
		</ul>
	</div>

	<div id="dialogs">
		<div id="loadSave">
			<textarea id="text" rows="25">
{"meta":{},
"entities":[
	{	"name": "User",
		"key": "user_id",
		"properties": [
			{	"name": "user_id",
				"type": "int",
				"attributes": {
					"primary": "true"}},
			{	"name": "name",
				"type": "string",
				"attributes": {}},
			{	"name": "address",
				"type": "string",
				"attributes": {
					"unique": "true"}}],
		"relationships": [
			{	"name": "authinfo",
				"type": "has_a",
				"to": {
					"type": "Authinfo",
					"property": "user_id",
					"vname": "user"},
				"from": {
					"type": "User",
					"property": "user_id",
					"vname": "user"}}],
		"attributes": {
			"vname": "users",
			"svname": "user"}},

	{	"name": "Authinfo",
		"key": "authinfo_id",
		"properties": [
			{	"name": "authinfo_id",
				"type": "int",
				"attributes": {
					"primary": "true"}},
			{	"name": "user_id",
				"type": "int",
				"attributes": {}},
			{	"name": "username",
				"type": "string",
				"attributes": {
					"length": "45"}},
			{	"name": "password",
				"type": "string",
				"attributes": {
					"length": "45"}},
			{	"name": "activated",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "banned",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "ban_reason",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "new_password_key",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "new_password_requested",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "new_email",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "new_email_key",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "last_ip",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "last_login",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "created",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}},
			{	"name": "modified",
				"type": "string",
				"attributes": {
					"nullable": "true",
					"length": "45"}}],
		"relationships": [
			{	"name": "user",
				"type": "has_a",
				"to": {
					"type": "User",
					"property": "user_id",
					"vname": "user"},
				"from": {
					"type": "Authinfo",
					"property": "user_id",
					"vname": "user"}}],
		"attributes": {
			"vname": "authinfo",
			"svname": "authinfo"}}]}
			</textarea>
			<input type="button" id="loadSave_do" value="Load" />
		</div>
	</div>
</body>
</html>
