// superscore - v0.2.6 - 2012-10-24
// https://github.com/DavidSouther/superscore
// Copyright (c) 2012 David Souther; Licensed MIT
(function(e,t){"use strict";e.mixin({on:function(n,r,i){return e.isElement(n)&&t?t(n).on(r,i):(this.isString(n)&&(i=r,r=n,n=this),this.isObject(n.__event_handlers)||(n.__event_handlers={}),r in n.__event_handlers||(n.__event_handlers[r]=e.Callbacks("memory")),n.__event_handlers[r].add(i),this)},once:function(n,r,i){if(e.isElement(n)&&t)return t(n).one(r,i);var s=function(){e.off(n,r,i)};i=e.compose(s,i),this.on(n,r,i)},trigger:function(n,r,i){return e.isElement(n)&&t?t(n).trigger(r,i):(this.isString(n)&&(i=r,r=n,n=this),this.isObject(n.__event_handlers)&&r in n.__event_handlers&&n.__event_handlers[r].fireWith(n,i),this)},off:function(n,r,i){return e.isElement(n)&&t?t(n).off(r,i):(this.isString(n)&&(r=n,n=this),this.isObject(n.__event_handlers)&&r in n.__event_handlers&&n.__event_handlers[r].remove(i),this)}})}).call(this,_,jQuery||null),function(e){var t={},n=function(e){return n.hash(e,!0)},r={};t.rvalid=/^\{?[0-9a-f]{8}\-?[0-9a-f]{4}\-?[0-9a-f]{4}\-?[0-9a-f]{4}\-?[0-9a-f]{12}\}?$/i,t.v4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})},t.v5=function(e,t){var r=i(t||"00000000-0000-0000-0000-000000000000"),s=n.hash(r+e,!0),o=s.substring(0,8)+"-"+s.substring(8,12)+"-"+(parseInt(s.substring(12,16),16)&4095|20480).toString(16)+"-"+(parseInt(s.substring(16,20),16)&16383|32768).toString(16)+"-"+s.substring(20,32);return o};var i=function(e){if(!e.match(t.rvalid))return!1;var n=e.replace(/[\-{}]/g,""),r="";for(var i=0;i<n.length;i+=2)r+=String.fromCharCode(parseInt(n.charAt(i)+n.charAt(i+1),16));return r};n.hash=function(e,t){var i,s;t=typeof t=="undefined"?!0:t,t&&(e=r.encode(e));var o=[1518500249,1859775393,2400959708,3395469782];e+=String.fromCharCode(128);var u=e.length/4+2,a=Math.ceil(u/16),f=new Array(a);for(i=0;i<a;i++){f[i]=new Array(16);for(var l=0;l<16;l++)f[i][l]=e.charCodeAt(i*64+l*4)<<24|e.charCodeAt(i*64+l*4+1)<<16|e.charCodeAt(i*64+l*4+2)<<8|e.charCodeAt(i*64+l*4+3)}f[a-1][14]=(e.length-1)*8/Math.pow(2,32),f[a-1][14]=Math.floor(f[a-1][14]),f[a-1][15]=(e.length-1)*8&4294967295;var c=1732584193,h=4023233417,p=2562383102,d=271733878,v=3285377520,m=new Array(80),g,y,b,w,E;for(i=0;i<a;i++){for(s=0;s<16;s++)m[s]=f[i][s];for(s=16;s<80;s++)m[s]=n.ROTL(m[s-3]^m[s-8]^m[s-14]^m[s-16],1);g=c,y=h,b=p,w=d,E=v;for(s=0;s<80;s++){var S=Math.floor(s/20),x=n.ROTL(g,5)+n.f(S,y,b,w)+E+o[S]+m[s]&4294967295;E=w,w=b,b=n.ROTL(y,30),y=g,g=x}c=c+g&4294967295,h=h+y&4294967295,p=p+b&4294967295,d=d+w&4294967295,v=v+E&4294967295}return n.toHexStr(c)+n.toHexStr(h)+n.toHexStr(p)+n.toHexStr(d)+n.toHexStr(v)},n.f=function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}},n.ROTL=function(e,t){return e<<t|e>>>32-t},n.toHexStr=function(e){var t="",n;for(var r=7;r>=0;r--)n=e>>>r*4&15,t+=n.toString(16);return t},r.encode=function(e){var t=e.replace(/[\u0080-\u07ff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|t&63)});return t=t.replace(/[\u0800-\uffff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|t>>6&63,128|t&63)}),t},r.decode=function(e){var t=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){var t=(e.charCodeAt(0)&15)<<12|(e.charCodeAt(1)&63)<<6|e.charCodeAt(2)&63;return String.fromCharCode(t)});return t=t.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){var t=(e.charCodeAt(0)&31)<<6|e.charCodeAt(1)&63;return String.fromCharCode(t)}),t},e.extend(e,{UUID:t,Utf8:r,Sha1:n})}.call(this,_),function(e){function n(e){var n=t[e]={},r,i;e=e.split(/\s+/);for(r=0,i=e.length;r<i;r++)n[e[r]]=!0;return n}var t={},r=Array.prototype.slice;e.Callbacks=function(r){r=r?t[r]||n(r):{};var i=[],s=[],o,u,a,f,l,c,h=function(t){var n,s,o,u,a;for(n=0,s=t.length;n<s;n++)o=t[n],e.isArray(o)?h(o):e.isFunction(o)&&(!r.unique||!d.has(o))&&i.push(o)},p=function(e,t){t=t||[],o=!r.memory||[e,t],u=!0,a=!0,c=f||0,f=0,l=i.length;for(;i&&c<l;c++)if(i[c].apply(e,t)===!1&&r.stopOnFalse){o=!0;break}a=!1,i&&(r.once?o===!0?d.disable():i=[]:s&&s.length&&(o=s.shift(),d.fireWith(o[0],o[1])))},d={add:function(){if(i){var e=i.length;h(arguments),a?l=i.length:o&&o!==!0&&(f=e,p(o[0],o[1]))}return this},remove:function(){if(i){var e=arguments,t=0,n=e.length;for(;t<n;t++)for(var s=0;s<i.length;s++)if(e[t]===i[s]){a&&s<=l&&(l--,s<=c&&c--),i.splice(s--,1);if(r.unique)break}}return this},has:function(e){if(i){var t=0,n=i.length;for(;t<n;t++)if(e===i[t])return!0}return!1},empty:function(){return i=[],this},disable:function(){return i=s=o=undefined,this},disabled:function(){return!i},lock:function(){return s=undefined,(!o||o===!0)&&d.disable(),this},locked:function(){return!s},fireWith:function(e,t){return s&&(a?r.once||s.push([e,t]):(!r.once||!o)&&p(e,t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!u}};return d},e.Deferred=function(t){var n=e.Callbacks("once memory"),r=e.Callbacks("once memory"),i=e.Callbacks("memory"),s="pending",o={resolve:n,reject:r,notify:i},u={done:n.add,fail:r.add,progress:i.add,state:function(){return s},isResolved:n.fired,isRejected:r.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(t,n,r){return e.Deferred(function(i){e.each({done:[t,"resolve"],fail:[n,"reject"],progress:[r,"notify"]},function(t,n){var r=t[0],s=t[1],o;e.isFunction(r)?a[n](function(){o=r.apply(this,arguments),o&&e.isFunction(o.promise)?o.promise().then(i.resolve,i.reject,i.notify):i[s+"With"](this===a?i:this,[o])}):a[n](i[s])})}).promise()},promise:function(e){if(!e)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){s="resolved"},r.disable,i.lock).fail(function(){s="rejected"},n.disable,i.lock),t&&t.call(a,a),a},e.when=function(t){function c(e){return function(t){n[e]=arguments.length>1?r.call(arguments,0):t,--u||f.resolveWith(f,n)}}function h(e){return function(t){o[e]=arguments.length>1?r.call(arguments,0):t,f.notifyWith(l,o)}}var n=r.call(arguments,0),i=0,s=n.length,o=new Array(s),u=s,a=s,f=s<=1&&t&&e.isFunction(t.promise)?t:e.Deferred(),l=f.promise();if(s>1){for(;i<s;i++)n[i]&&n[i].promise&&e.isFunction(n[i].promise)?n[i].promise().then(c(i),f.reject,h(i)):--u;u||f.resolveWith(f,n)}else f!==t&&f.resolveWith(f,s?[t]:[]);return l}}.call(this,_),function(e,t){"use strict";e.mixin({indexBy:function(e,t){e=e||[],t=t||function(){return!1};for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return n;return-1},noop:function(){},symmetricDifference:function(){return e.reduce(arguments,function(t,n){return e.union(e.difference(t,n),e.difference(n,t))})},deep:function(t,n,r,i){i=i||!1,r=r||null,n=e.isString(n)?n.split("."):e.isArray(n)?n:[];var s=n.shift();if(n.length){t[s]||(t[s]=e.isNaN(+n[0])?{}:[]);var o=e.deep(t[s],n,r,i);return r?t:o}return r?(t[s]=i?r:t[s]||r,t):t[s]}}),e._extend=e.extend;var n=Object.prototype.hasOwnProperty;e.extend=function(){var t,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!e.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((t=arguments[a])!==null)for(n in t){r=u[n],i=t[n];if(u===i)continue;l&&i&&(e.isPlainObject(i)||(s=e.isArray(i)))?(s?(s=!1,o=r&&e.isArray(r)?r:[]):o=r&&e.isPlainObject(r)?r:{},u[n]=e.extend(l,o,i)):i!==undefined&&(u[n]=i)}return u},e.isPlainObject=function(t){if(!t||!e.isObject(t)||t.nodeType||e.isWindow(t))return!1;try{if(t.constructor&&!n.call(t,"constructor")&&!n.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}var i;for(i in t);return i===undefined||n.call(t,i)},e.isWindow=t?t.isWindow:function(e){return e!==null&&e===e.window},e.lock=function(e){return function(){var t,n;if(!e.__locked){e.__locked=!0;try{t=e.apply(this,arguments)}catch(r){n=r}}e.__locked=!1;if(n)throw n;return t}}}.call(this,_,jQuery||null),function(e,t){"use strict";var n=t?t.ajax:function(t){var n,r,i=e.Deferred();return r=window.ActiveXObject||XMLHttpRequest,n=new r("Microsoft.XMLHTTP"),n.open(t.type||(t.data?"POST":"GET"),t.url,!0),"overrideMimeType"in n&&n.overrideMimeType(t.dataType||"text/plain"),n.onreadystatechange=function(){var e;if(n.readyState===4){(e=n.status)===0||e===200?i.resolve(n.responseText):i.reject(new Error("Could not load "+t.url));return}i.notify(n)},t.data&&(n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("Content-length",t.data.length),n.setRequestHeader("Connection","close")),n.send(t.data||null),i.promise()},r=t?t.get:function(t,n){return n=n||{},n.url=t,n.type="GET",n.data=null,e.ajax(n)},i=t?t.post:function(t,n){return n=n||{},n.url=t,n.type="POST",e.ajax(n)};e.mixin({ajax:n,get:r,post:i})}.call(this,_,jQuery||null);